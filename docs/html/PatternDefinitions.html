<html>
<head>
<title>Pattern Definitions</title>
<meta content="text/html; charset=UTF-8" http-equiv="content-type">
<style type="text/css">
.lst-kix_2sufgkou6kdn-2>li {
	counter-increment: lst-ctn-kix_2sufgkou6kdn-2
}

.lst-kix_4gk3rmvhckv-5>li {
	counter-increment: lst-ctn-kix_4gk3rmvhckv-5
}

ol.lst-kix_2sufgkou6kdn-4.start {
	counter-reset: lst-ctn-kix_2sufgkou6kdn-4 0
}

.lst-kix_4gk3rmvhckv-7>li:before {
	content: "" counter(lst-ctn-kix_4gk3rmvhckv-7, lower-latin) ". "
}

ol.lst-kix_2sufgkou6kdn-8.start {
	counter-reset: lst-ctn-kix_2sufgkou6kdn-8 0
}

.lst-kix_4gk3rmvhckv-5>li:before {
	content: "" counter(lst-ctn-kix_4gk3rmvhckv-5, lower-roman) ". "
}

ol.lst-kix_4gk3rmvhckv-2.start {
	counter-reset: lst-ctn-kix_4gk3rmvhckv-2 0
}

.lst-kix_2sufgkou6kdn-5>li:before {
	content: "" counter(lst-ctn-kix_2sufgkou6kdn-5, lower-roman) ". "
}

.lst-kix_2sufgkou6kdn-4>li {
	counter-increment: lst-ctn-kix_2sufgkou6kdn-4
}

.lst-kix_2sufgkou6kdn-2>li:before {
	content: "" counter(lst-ctn-kix_2sufgkou6kdn-2, lower-roman) ". "
}

ol.lst-kix_2sufgkou6kdn-0.start {
	counter-reset: lst-ctn-kix_2sufgkou6kdn-0 0
}

.lst-kix_4gk3rmvhckv-6>li:before {
	content: "" counter(lst-ctn-kix_4gk3rmvhckv-6, decimal) ". "
}

.lst-kix_2sufgkou6kdn-5>li {
	counter-increment: lst-ctn-kix_2sufgkou6kdn-5
}

ol.lst-kix_2sufgkou6kdn-1.start {
	counter-reset: lst-ctn-kix_2sufgkou6kdn-1 0
}

ol.lst-kix_2sufgkou6kdn-6.start {
	counter-reset: lst-ctn-kix_2sufgkou6kdn-6 0
}

.lst-kix_2sufgkou6kdn-0>li {
	counter-increment: lst-ctn-kix_2sufgkou6kdn-0
}

.lst-kix_4gk3rmvhckv-2>li:before {
	content: "" counter(lst-ctn-kix_4gk3rmvhckv-2, lower-roman) ". "
}

ol.lst-kix_4gk3rmvhckv-7.start {
	counter-reset: lst-ctn-kix_4gk3rmvhckv-7 0
}

ol.lst-kix_4gk3rmvhckv-4.start {
	counter-reset: lst-ctn-kix_4gk3rmvhckv-4 0
}

.lst-kix_2sufgkou6kdn-3>li:before {
	content: "" counter(lst-ctn-kix_2sufgkou6kdn-3, decimal) ". "
}

.lst-kix_4gk3rmvhckv-3>li:before {
	content: "" counter(lst-ctn-kix_4gk3rmvhckv-3, decimal) ". "
}

.lst-kix_4gk3rmvhckv-8>li {
	counter-increment: lst-ctn-kix_4gk3rmvhckv-8
}

ol.lst-kix_2sufgkou6kdn-3.start {
	counter-reset: lst-ctn-kix_2sufgkou6kdn-3 0
}

.lst-kix_4gk3rmvhckv-1>li:before {
	content: "" counter(lst-ctn-kix_4gk3rmvhckv-1, lower-latin) ". "
}

.lst-kix_4gk3rmvhckv-1>li {
	counter-increment: lst-ctn-kix_4gk3rmvhckv-1
}

.lst-kix_2sufgkou6kdn-0>li:before {
	content: "" counter(lst-ctn-kix_2sufgkou6kdn-0, decimal) ". "
}

.lst-kix_2sufgkou6kdn-7>li {
	counter-increment: lst-ctn-kix_2sufgkou6kdn-7
}

.lst-kix_2sufgkou6kdn-6>li {
	counter-increment: lst-ctn-kix_2sufgkou6kdn-6
}

ol.lst-kix_2sufgkou6kdn-7.start {
	counter-reset: lst-ctn-kix_2sufgkou6kdn-7 0
}

.lst-kix_2sufgkou6kdn-8>li:before {
	content: "" counter(lst-ctn-kix_2sufgkou6kdn-8, lower-roman) ". "
}

.lst-kix_4gk3rmvhckv-4>li {
	counter-increment: lst-ctn-kix_4gk3rmvhckv-4
}

.lst-kix_4gk3rmvhckv-2>li {
	counter-increment: lst-ctn-kix_4gk3rmvhckv-2
}

.lst-kix_2sufgkou6kdn-1>li:before {
	content: "" counter(lst-ctn-kix_2sufgkou6kdn-1, lower-latin) ". "
}

ol.lst-kix_4gk3rmvhckv-6.start {
	counter-reset: lst-ctn-kix_4gk3rmvhckv-6 0
}

.lst-kix_2sufgkou6kdn-4>li:before {
	content: "" counter(lst-ctn-kix_2sufgkou6kdn-4, lower-latin) ". "
}

.lst-kix_4gk3rmvhckv-0>li {
	counter-increment: lst-ctn-kix_4gk3rmvhckv-0
}

.lst-kix_4gk3rmvhckv-7>li {
	counter-increment: lst-ctn-kix_4gk3rmvhckv-7
}

ol.lst-kix_2sufgkou6kdn-8 {
	list-style-type: none
}

ol.lst-kix_4gk3rmvhckv-8 {
	list-style-type: none
}

.lst-kix_2sufgkou6kdn-1>li {
	counter-increment: lst-ctn-kix_2sufgkou6kdn-1
}

ol.lst-kix_2sufgkou6kdn-7 {
	list-style-type: none
}

ol.lst-kix_4gk3rmvhckv-7 {
	list-style-type: none
}

ol.lst-kix_2sufgkou6kdn-6 {
	list-style-type: none
}

ol.lst-kix_4gk3rmvhckv-6 {
	list-style-type: none
}

ol.lst-kix_2sufgkou6kdn-5 {
	list-style-type: none
}

ol.lst-kix_4gk3rmvhckv-5 {
	list-style-type: none
}

ol.lst-kix_2sufgkou6kdn-4 {
	list-style-type: none
}

ol.lst-kix_4gk3rmvhckv-4 {
	list-style-type: none
}

ol.lst-kix_2sufgkou6kdn-3 {
	list-style-type: none
}

ol.lst-kix_4gk3rmvhckv-8.start {
	counter-reset: lst-ctn-kix_4gk3rmvhckv-8 0
}

ol.lst-kix_4gk3rmvhckv-3 {
	list-style-type: none
}

ol.lst-kix_2sufgkou6kdn-2 {
	list-style-type: none
}

ol.lst-kix_2sufgkou6kdn-5.start {
	counter-reset: lst-ctn-kix_2sufgkou6kdn-5 0
}

ol.lst-kix_2sufgkou6kdn-1 {
	list-style-type: none
}

ol.lst-kix_4gk3rmvhckv-2 {
	list-style-type: none
}

ol.lst-kix_2sufgkou6kdn-0 {
	list-style-type: none
}

.lst-kix_4gk3rmvhckv-0>li:before {
	content: "" counter(lst-ctn-kix_4gk3rmvhckv-0, decimal) ". "
}

ol.lst-kix_4gk3rmvhckv-1 {
	list-style-type: none
}

ol.lst-kix_4gk3rmvhckv-0 {
	list-style-type: none
}

.lst-kix_2sufgkou6kdn-6>li:before {
	content: "" counter(lst-ctn-kix_2sufgkou6kdn-6, decimal) ". "
}

.lst-kix_4gk3rmvhckv-6>li {
	counter-increment: lst-ctn-kix_4gk3rmvhckv-6
}

ol.lst-kix_4gk3rmvhckv-3.start {
	counter-reset: lst-ctn-kix_4gk3rmvhckv-3 0
}

.lst-kix_4gk3rmvhckv-4>li:before {
	content: "" counter(lst-ctn-kix_4gk3rmvhckv-4, lower-latin) ". "
}

ol.lst-kix_2sufgkou6kdn-2.start {
	counter-reset: lst-ctn-kix_2sufgkou6kdn-2 0
}

ol.lst-kix_4gk3rmvhckv-0.start {
	counter-reset: lst-ctn-kix_4gk3rmvhckv-0 0
}

.lst-kix_4gk3rmvhckv-8>li:before {
	content: "" counter(lst-ctn-kix_4gk3rmvhckv-8, lower-roman) ". "
}

.lst-kix_2sufgkou6kdn-3>li {
	counter-increment: lst-ctn-kix_2sufgkou6kdn-3
}

ol.lst-kix_4gk3rmvhckv-1.start {
	counter-reset: lst-ctn-kix_4gk3rmvhckv-1 0
}

ol.lst-kix_4gk3rmvhckv-5.start {
	counter-reset: lst-ctn-kix_4gk3rmvhckv-5 0
}

.lst-kix_4gk3rmvhckv-3>li {
	counter-increment: lst-ctn-kix_4gk3rmvhckv-3
}

.lst-kix_2sufgkou6kdn-8>li {
	counter-increment: lst-ctn-kix_2sufgkou6kdn-8
}

.lst-kix_2sufgkou6kdn-7>li:before {
	content: "" counter(lst-ctn-kix_2sufgkou6kdn-7, lower-latin) ". "
}

ol {
	margin: 0;
	padding: 0
}

.c0 {
	widows: 2;
	orphans: 2;
	direction: ltr;
	page-break-after: avoid
}

.c2 {
	widows: 2;
	orphans: 2;
	height: 11pt;
	direction: ltr
}

.c6 {
	max-width: 468pt;
	background-color: #ffffff;
	padding: 72pt 72pt 72pt 72pt
}

.c3 {
	widows: 2;
	orphans: 2;
	direction: ltr
}

.c4 {
	padding-left: 0pt;
	margin-left: 36pt
}

.c5 {
	margin: 0;
	padding: 0
}

.c1 {
	font-size: 8pt
}

.title {
	widows: 2;
	padding-top: 0pt;
	line-height: 1.15;
	orphans: 2;
	text-align: left;
	color: #000000;
	font-size: 21pt;
	font-family: "Trebuchet MS";
	padding-bottom: 0pt;
	page-break-after: avoid
}

.subtitle {
	widows: 2;
	padding-top: 0pt;
	line-height: 1.15;
	orphans: 2;
	text-align: left;
	color: #666666;
	font-style: italic;
	font-size: 13pt;
	font-family: "Trebuchet MS";
	padding-bottom: 10pt;
	page-break-after: avoid
}

li {
	color: #000000;
	font-size: 11pt;
	font-family: "Arial"
}

p {
	color: #000000;
	font-size: 11pt;
	margin: 0;
	font-family: "Arial"
}

h1 {
	widows: 2;
	padding-top: 10pt;
	line-height: 1.15;
	orphans: 2;
	text-align: left;
	color: #000000;
	font-size: 16pt;
	font-family: "Trebuchet MS";
	padding-bottom: 0pt;
	page-break-after: avoid
}

h2 {
	widows: 2;
	padding-top: 10pt;
	line-height: 1.15;
	orphans: 2;
	text-align: left;
	color: #000000;
	font-size: 13pt;
	font-family: "Trebuchet MS";
	font-weight: bold;
	padding-bottom: 0pt;
	page-break-after: avoid
}

h3 {
	widows: 2;
	padding-top: 8pt;
	line-height: 1.15;
	orphans: 2;
	text-align: left;
	color: #666666;
	font-size: 12pt;
	font-family: "Trebuchet MS";
	font-weight: bold;
	padding-bottom: 0pt;
	page-break-after: avoid
}

h4 {
	widows: 2;
	padding-top: 8pt;
	line-height: 1.15;
	orphans: 2;
	text-align: left;
	color: #666666;
	font-size: 11pt;
	text-decoration: underline;
	font-family: "Trebuchet MS";
	padding-bottom: 0pt;
	page-break-after: avoid
}

h5 {
	widows: 2;
	padding-top: 8pt;
	line-height: 1.15;
	orphans: 2;
	text-align: left;
	color: #666666;
	font-size: 11pt;
	font-family: "Trebuchet MS";
	padding-bottom: 0pt;
	page-break-after: avoid
}

h6 {
	widows: 2;
	padding-top: 8pt;
	line-height: 1.15;
	orphans: 2;
	text-align: left;
	color: #666666;
	font-style: italic;
	font-size: 11pt;
	font-family: "Trebuchet MS";
	padding-bottom: 0pt;
	page-break-after: avoid
}
</style>
</head>
<body class="c6">
	<p class="c0 title">
		<a name="h.satjecwxr6p5"></a><span>JavaScribe Pattern
			Definitions</span>
	</p>
	<p class="c2">
		<span></span>
	</p>
	<p class="c3">
		<span>First, an overview of how JavaScribe finds patterns and
			invokes component processors.</span>
	</p>
	<p class="c2">
		<span></span>
	</p>
	<p class="c3">
		<span>When JavaScribe launches, it looks in the lib directory
			for JARs. &nbsp;JavaScribe scans the classes in each JAR for the
			annotation &ldquo;net.sf.javascribe.api.annotation.Scannable&rdquo;.
			&nbsp;For each class with with this annotation, it does as many as
			three things:</span>
	</p>
	<p class="c2">
		<span></span>
	</p>
	<ol class="c5 lst-kix_2sufgkou6kdn-0 start" start="1">
		<li class="c3 c4"><span>Determines if the class is
				required for reading XML (implements
				net.sf.javascribe.api.config.ComponentConfigElement). &nbsp;This
				includes subclasses of net.sf.javascribe.api.config.ComponentBase
				(&ldquo;ComponentBase&rdquo;).</span></li>
		<li class="c3 c4"><span>Determines if the class is a
				pattern processor - has annotation
				net.sf.javascribe.api.config.Processor (&ldquo;Processor&rdquo;).</span></li>
		<li class="c3 c4"><span>Makes the class available to
				component processors via EngineProperties.</span></li>
	</ol>
	<p class="c2">
		<span></span>
	</p>
	<p class="c0 title">
		<a name="h.5n92accjcgjw"></a><span>Pattern Definitions</span>
	</p>
	<p class="c2">
		<span></span>
	</p>
	<p class="c3">
		<span>When a developer defines components for JavaScribe, those
			component definitions are in XML files. &nbsp;Therefore, a pattern
			definition is a JAXB-annotated set of classes which can be put into a
			JAXB context. &nbsp;This JAXB context is then used to read the
			user&rsquo;s component XML file(s) into memory so that the components
			can be processed.</span>
	</p>
	<p class="c2">
		<span></span>
	</p>
	<p class="c3">
		<span>Every pattern has a priority which determines what order
			the user&rsquo;s components are processed in. &nbsp;Patterns are
			processed in order of ascending priority. &nbsp;In ComponentBase, the
			default priority is 0 and can be overridden by subclasses.
			&nbsp;Priority means that a component like the DAO can be marked to
			be processed earlier than, for example, a business service which is
			dependant on the DAO. &nbsp;With priorities set properly, it does not
			matter where the two components are defined - they will always be
			processed in the correct order.</span>
	</p>
	<p class="c2">
		<span></span>
	</p>
	<p class="c3">
		<span>Occasionally it is useful to allow the user to define the
			priority level of a component they are defining. &nbsp;This can be
			done by overriding the getPriority() method and marking the priority
			of this pattern to be configurable via XML. &nbsp;This can be useful
			then a pattern allows the user to inject handwritten code. &nbsp;For
			an example of this, see the pattern
			net.sf.javascribe.patterns.custom.HandwrittenCode.</span>
	</p>
	<p class="c2">
		<span></span>
	</p>
	<p class="c2">
		<span></span>
	</p>
	<p class="c0 title">
		<a name="h.8xt8f9tqnc9h"></a><span>Component Processors</span>
	</p>
	<p class="c2">
		<span></span>
	</p>
	<p class="c3">
		<span>A component processor is a class annotated with Processor
			that has one or more methods annotated with
			net.sf.javascribe.api.annotation.ProcessorMethod. &nbsp;The
			ProcessorMethod annotation specifies that this method will process a
			component. &nbsp;The ProcessorMethod annotation has a single element
			&ldquo;componentClass&rdquo; which determines what ComponentBase
			subclass it processes. &nbsp;The method should have two parameters:
			one which is the ComponentBase subclass, and one which a
			ProcessorContext.</span>
	</p>
	<p class="c2">
		<span></span>
	</p>
	<p class="c0 title">
		<a name="h.wyndo9m79b93"></a><span>The Processor Context</span>
	</p>
	<p class="c3">
		<span>Much of the flexibility that JavaScribe gives to
			component processors comes from the Processor Context. &nbsp;The
			Processor Context gives the component processor access to a number of
			resources available to the engine. &nbsp;Most importantly, source
			files are added to the target distribution via the Processor Context.
			&nbsp;A few other things available via the Processor Context are:</span>
	</p>
	<ol class="c5 lst-kix_4gk3rmvhckv-0 start" start="1">
		<li class="c3 c4"><span>Configuration properties.</span></li>
		<li class="c3 c4"><span>Source files that were added
				previously by other processors.</span></li>
		<li class="c3 c4"><span>Scannable classes found by the
				engine (to find plugins)</span></li>
		<li class="c3 c4"><span>Shared objects (shared with other
				component processors)</span></li>
		<li class="c3 c4"><span>Ability to add component
				definition(s) to the component set.</span></li>
	</ol>
	<p class="c2">
		<span></span>
	</p>
	<p class="c3">
		<span>For more information you should browse the JavaDocs.</span>
	</p>
	<p class="c2">
		<span></span>
	</p>
	<p class="c0 title">
		<a name="h.z7hrs6dr9sdn"></a><span>Example Pattern and
			Processor</span>
	</p>
	<p class="c3">
		<span>To show an example, take the relatively simple DataObject
			pattern. &nbsp;A DataObject is an object with a name and a set of
			attributes. The definition and processing of this pattern are not
			terribly complex. &nbsp;The ComponentBase extension looks like this:</span>
	</p>
	<p class="c2">
		<span></span>
	</p>
	<p class="c3">
		<span>(From net.sf.javascribe.patterns.dataobject.DataObject)</span>
	</p>
	<p class="c2">
		<span></span>
	</p>
	<p class="c3">
		<span class="c1">@Scannable</span>
	</p>
	<p class="c3">
		<span class="c1">@XmlRootElement(name=&quot;dataObject&quot;)</span>
	</p>
	<p class="c3">
		<span class="c1">@XmlAccessorType(XmlAccessType.FIELD)</span>
	</p>
	<p class="c3">
		<span class="c1">@XmlType(name=&quot;dataObject&quot;,propOrder={
			})</span>
	</p>
	<p class="c3">
		<span class="c1">public class DataObject extends ComponentBase
			{</span>
	</p>
	<p class="c2">
		<span class="c1"></span>
	</p>
	<p class="c3">
		<span class="c1">&nbsp; &nbsp; @XmlAttribute</span>
	</p>
	<p class="c3">
		<span class="c1">&nbsp; &nbsp; private String name = null;</span>
	</p>
	<p class="c3">
		<span class="c1">&nbsp; &nbsp; @XmlAttribute</span>
	</p>
	<p class="c3">
		<span class="c1">&nbsp; &nbsp; private String attributes =
			null;</span>
	</p>
	<p class="c2">
		<span class="c1"></span>
	</p>
	<p class="c3">
		<span class="c1">&nbsp; &nbsp; public int getPriority() {
			return CorePatternConstants.PRIORITY_DATA_OBJECT; }</span>
	</p>
	<p class="c2">
		<span class="c1"></span>
	</p>
	<p class="c3">
		<span class="c1">&nbsp; &nbsp; // Some other stuff</span>
	</p>
	<p class="c2">
		<span class="c1"></span>
	</p>
	<p class="c3">
		<span class="c1">}</span>
	</p>
	<p class="c2">
		<span></span>
	</p>
	<p class="c3">
		<span>Meanwhile, the processor for the data object pattern
			looks like this:</span>
	</p>
	<p class="c2">
		<span></span>
	</p>
	<p class="c3">
		<span>(From
			net.sf.javascribe.patterns.dataobject.DataObjectProcessor)</span>
	</p>
	<p class="c2">
		<span></span>
	</p>
	<p class="c3">
		<span class="c1">@Scannable</span>
	</p>
	<p class="c3">
		<span class="c1">@Processor</span>
	</p>
	<p class="c3">
		<span class="c1">public class DataObjectProcessor {</span>
	</p>
	<p class="c2">
		<span class="c1"></span>
	</p>
	<p class="c3">
		<span class="c1">&nbsp; &nbsp;
			@ProcessorMethod(componentClass=DataObject.class)</span>
	</p>
	<p class="c3">
		<span class="c1">&nbsp; &nbsp; public void process(DataObject
			comp,ProcessorContext ctx) throws JavascribeException {</span>
	</p>
	<p class="c3">
		<span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; // Code generation
			stuff</span>
	</p>
	<p class="c3">
		<span class="c1">&nbsp; &nbsp; }</span>
	</p>
	<p class="c3">
		<span class="c1">}</span>
	</p>
	<p class="c2">
		<span></span>
	</p>
	<p class="c3">
		<span>Looking at these, we see that the DataObject class is
			annotated with JAXB to be an XML element called
			&ldquo;dataObject&rdquo; with attributes &ldquo;name&rdquo; and
			&ldquo;attributes&rdquo;. &nbsp; The processor method (member of a
			class with the @Processor annotation) takes the component and the
			processor context as parameters and can throw JavascribeException to
			halt code generation if there is a problem with the current
			component.</span>
	</p>
	<p class="c2">
		<span></span>
	</p>
	<p class="c3">
		<span>A JavaScribe user can now use this code pattern and
			create a data object (like a DTO) with the following XML snippet:</span>
	</p>
	<p class="c2">
		<span></span>
	</p>
	<p class="c3">
		<span class="c1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;dataObject
			xmlns=&quot;http://javascribe.sf.net/patterns/data-object&quot;</span>
	</p>
	<p class="c3">
		<span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
			&nbsp; &nbsp; name=&quot;UserData&quot;
			attributes=&quot;firstName:string,lastName:string,email:string&quot;
			/&gt;</span>
	</p>
	<p class="c2">
		<span></span>
	</p>
	<p class="c3">
		<span>For further information you should refer to the
			implemented patterns. &nbsp;The Data Object pattern described above
			is a good example to start with.</span>
	</p>
	<p class="c2">
		<span></span>
	</p>
	<p class="c2">
		<span></span>
	</p>
</body>
</html>
